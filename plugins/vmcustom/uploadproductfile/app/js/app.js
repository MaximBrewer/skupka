(function(t){function e(e){for(var i,n,r=e[0],c=e[1],u=e[2],l=0,d=[];l<r.length;l++)n=r[l],o[n]&&d.push(o[n][0]),o[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=n(n.s=s[0]))}return t}var i={},o={app:0},a=[];function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var p=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0517":function(t,e,s){},"0746":function(t,e,s){"use strict";var i=s("268b"),o=s.n(i);o.a},"14d3":function(t,e,s){},"268b":function(t,e,s){},"3fe9":function(t,e,s){"use strict";var i=s("14d3"),o=s.n(i);o.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("097d");var i=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.succes,expression:"$store.state.succes"}],staticClass:"succes_app"},[t._v("\n            Информация сохранена.\n        ")])]),s("div",{staticClass:"app-container"},[s("div",[s("button",{on:{click:function(e){return e.preventDefault(),t.add_group(e)}}},[t._v("Добавить группу")])]),s("div",{staticClass:"app-groups"},[s("draggable",{staticClass:"items",attrs:{options:{draggable:".group_item"}},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,function(t,e){return s("div",{key:t.sort,staticClass:"group_item "},[s("Group",{attrs:{ind:e}})],1)}))],1),s("div",{staticClass:"app-save"},[s("button",{on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t._v("Сохранить")])]),s("dir",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.show_dir,expression:"$store.state.show_dir"}]})],1)],1)},a=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product"},[t._v("\n       111111\n")])},r=[],c={},u=c,p=(s("f1a7"),s("2877")),l=Object(p["a"])(u,n,r,!1,null,"6fbdca78",null);l.options.__file="Product.vue";var d=l.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"group"},[s("span",{staticClass:"trash-alt",on:{click:t.removeGroup}},[s("v-icon",{attrs:{name:"trash-alt"}})],1),s("div",{staticClass:"input"},[s("strong",[t._v("Название:")]),s("input",{staticClass:"input_title",attrs:{type:"text"},domProps:{value:t.title},on:{input:t.setTitle}})]),s("draggable",{staticClass:"items",attrs:{options:{draggable:".item"}},model:{value:t.items,callback:function(e){t.items=e},expression:"items"}},t._l(t.items,function(e,i){return s("div",{key:e.sort,staticClass:"item"},[s("div",{staticClass:"wrap_item"},[s("span",{staticClass:"trash-alt",on:{click:function(e){t.removePhoto(i)}}},[s("v-icon",{attrs:{name:"trash-alt"}})],1),s("div",{staticClass:"photo"},[s("img",{attrs:{src:t.$store.state.path+e.photo}})]),s("div",{staticClass:"name"},[s("input",{attrs:{type:"text"},domProps:{value:e.title},on:{input:function(e){t.setPhotoTitle(e,i)}}})])])])})),s("div",{staticClass:"addItem",on:{click:t.addItem}},[s("span",[t._v("+")])])],1)},f=[],v=s("1516"),h=s.n(v),g={props:["ind"],components:{draggable:h.a},computed:{title:function(){return console.log(this.ind),this.$store.state.groups[this.ind].title},items:{get:function(){return this.$store.state.groups[this.ind].items},set:function(t){this.$store.commit("updateSortItemsinGroup",{value:t,ind:this.ind})}}},methods:{setTitle:function(t){var e=t.target.value;this.$store.commit("setTitle",{val:e,ind:this.ind})},addItem:function(){this.$store.commit("addItem",this.ind)},removePhoto:function(t){this.$store.commit("removePhotoinGroup",{ind:this.ind,key:t})},setPhotoTitle:function(t,e){var s=t.target.value;this.$store.commit("setPhotoTitle",{ind:this.ind,v:s,key:e})},removeGroup:function(){this.$store.commit("removeGroup",{ind:this.ind})}},mounted:function(){}},_=g,b=(s("bd99"),Object(p["a"])(_,m,f,!1,null,"a848ea44",null));b.options.__file="Group.vue";var $=b.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dir"},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.response,expression:"response"}],staticClass:"response"},[t._v("\n           Добалено\n        ")])]),s("div",{staticClass:"panel-header"},[s("div",{staticClass:"close_app",on:{click:t.close}},[s("v-icon",{attrs:{name:"times-circle",scale:"1.5"}})],1),s("div",{staticClass:"title"},[t._v("Файловый менеджер")])]),s("Actions"),s("div",{staticClass:"block_images",attrs:{id:"block_images"}},[s("div",{staticClass:"images"},t._l(t.$store.state.images,function(e,i){return s("div",{key:i,staticClass:"image"},[s("div",{staticClass:"wrap_image"},[s("span",{staticClass:"trash-alt",on:{click:function(s){t.removeFile(e,i)}}},[s("v-icon",{attrs:{name:"trash-alt"}})],1),s("div",{staticClass:"photo"},[s("img",{attrs:{src:t.$store.state.path+e}})]),s("div",{staticClass:"name"},[t._v("\n                        "+t._s(e)+"\n                    ")]),t.$store.state.active_ind||0===t.$store.state.active_ind?s("div",{staticClass:"addGroups_wrap"},[s("span",{staticClass:"addGroups",on:{click:function(s){t.addGroups(e,i)}}},[s("v-icon",{attrs:{name:"plus-circle"}}),s("span",[t._v("в группу ")]),s("strong",[t._v(t._s(t.$store.state.groups[t.$store.state.active_ind].title))])],1)]):t._e()])])}))]),t._m(0)],1)},w=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel-header"},[s("br")])}],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel-actions"},[s("div",{staticClass:"wrap_panel"},[s("div",{staticClass:"item file-upload"},[s("file-upload",{ref:"upload",staticClass:"btn_upload",attrs:{extensions:"gif,jpg,jpeg,png,webp","post-action":t.post,accept:"image/png, image/gif, image/jpeg, image/webp"},on:{input:t.inputUpdate,"input-file":t.inputFile}},[s("v-icon",{attrs:{name:"upload"}}),s("span",[t._v("Загрузить +")])],1)],1)])])},y=[],k={computed:{post:function(){return"/plugins/vmcustom/uploadproductfile/helpers/file.php"}},methods:{inputUpdate:function(t){},inputFile:function(t,e){t&&e&&(t.active!==e.active&&t.size>=0&&t.size<102400&&(t=this.$refs.upload.update(t,{error:"size"})),t.progress,e.progress,t.error,e.error,t.success!==e.success&&(console.log("success",t.success,t),this.$store.dispatch("getPhoto"),setTimeout(function(){var t=document.getElementById("block_images");t.scrollTop=t.scrollHeight},2e3))),!t&&e&&e.success&&e.response.id,Boolean(t)===Boolean(e)&&e.error===t.error||this.$refs.upload.active||(this.$refs.upload.active=!0)}}},x=k,T=(s("0746"),Object(p["a"])(x,P,y,!1,null,"722ff20c",null));T.options.__file="Actions.vue";var G=T.exports,O={data:function(){return{response:!1}},components:{Actions:G},mounted:function(){this.$store.dispatch("getPhoto")},methods:{removeFile:function(t,e){this.$store.dispatch("removePhoto",{key:e,item:t})},addGroups:function(t,e){var s=this;this.response=!0,setTimeout(function(){s.response=!1},2e3),this.$store.commit("addPhotogroup",{key:e,item:t})},close:function(){this.$store.commit("close")}}},j=O,I=(s("3fe9"),Object(p["a"])(j,C,w,!1,null,"c46ae294",null));I.options.__file="Dir.vue";var S=I.exports,D={name:"app",components:{Group:$,dir:S,product:d,draggable:h.a},computed:{items:{get:function(){return this.$store.state.groups},set:function(t){this.$store.commit("updateSortGroup",t)}}},mounted:function(){this.$store.dispatch("getItems")},methods:{add_group:function(){this.$store.commit("add_groups")},save:function(){this.$store.dispatch("save")},test:function(){this.$store.dispatch("getItems")}}},E=D,F=(s("5c0b"),Object(p["a"])(E,o,a,!1,null,null,null));F.options.__file="App.vue";var A=F.exports,M=s("2f62");i["a"].use(M["a"]);var N=new M["a"].Store({state:{page_id:page_id,groups:[],active_ind:!1,show_dir:!1,images:[],path:"",succes:!1},mutations:{addItemsDefault:function(t,e){for(var s=0;s<e.length;s++){var i=e[s];t.groups.push(i)}},add_groups:function(t){t.groups.push({title:"",items:[],sort:t.groups.length+1})},removeGroup:function(t,e){t.groups.splice(e.ind,1)},setTitle:function(t,e){t.groups[e.ind].title=e.val},addPhotogroup:function(t,e){t.groups[t.active_ind].items.push({photo:e.item,title:"",sort:t.groups[t.active_ind].items.length+1})},removePhotoinGroup:function(t,e){t.groups[e.ind].items.splice(e.key,1)},setPhotoTitle:function(t,e){i["a"].set(t.groups[e.ind].items[e.key],"title",e.v)},addItem:function(t,e){t.active_ind=e,t.show_dir=!0},close:function(t){t.show_dir=!1},setPhoto_path_default:function(t,e){t.images=e.images,t.path=e.path},updateSortGroup:function(t,e){t.groups=e},updateSortItemsinGroup:function(t,e){t.groups[e.ind].items=e.value}},actions:{getItems:function(t){var e=this,s=(t.commit,t.state),o=(new Date).getTime();i["a"].axios.get("/plugins/vmcustom/uploadproductfile/helpers/items.php?action=get&page_id="+s.page_id+"&uniq_param="+o,{headers:{}}).then(function(t){t.data&&e.commit("addItemsDefault",t.data)})},getPhoto:function(){var t=this,e=(new Date).getTime();i["a"].axios.get("/plugins/vmcustom/uploadproductfile/helpers/file.php?action=get_catalog&=uniq_param="+e,{headers:{}}).then(function(e){t.commit("setPhoto_path_default",e.data)})},removePhoto:function(t,e){var s=this,o=(t.commit,t.state,new FormData);o.append("action","delete"),o.append("item",e.item);var a={method:"POST",data:o,url:"/plugins/vmcustom/uploadproductfile/helpers/file.php"};i["a"].axios(a).then(function(t){s.dispatch("getPhoto")})},save:function(t){t.commit;var e=t.state,s=new FormData;s.append("action","save"),s.append("page_id",e.page_id),s.append("items",JSON.stringify(e.groups));var o={method:"POST",data:s,url:"/plugins/vmcustom/uploadproductfile/helpers/items.php"};i["a"].axios(o).then(function(t){t.data.suc&&(e.succes=!0,setTimeout(function(){e.succes=!1},3e3))})}}}),z=s("bc3a"),B=s.n(z),J=s("a7fe"),q=s.n(J),U=(s("d06d"),s("0874"));i["a"].use(q.a,B.a),i["a"].component("v-icon",U["a"]);var H=s("8019");i["a"].component("file-upload",H),i["a"].config.productionTip=!1,new i["a"]({store:N,render:function(t){return t(A)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var i=s("5e27"),o=s.n(i);o.a},"5e27":function(t,e,s){},b4cb:function(t,e,s){},bd99:function(t,e,s){"use strict";var i=s("b4cb"),o=s.n(i);o.a},f1a7:function(t,e,s){"use strict";var i=s("0517"),o=s.n(i);o.a}});
//# sourceMappingURL=app.js.map